I"N%<h1 class="no_toc" id="plotting-results">Plotting results</h1>

<p><em>Last update: 06/04/21</em></p>

<ul id="markdown-toc">
  <li><a href="#plotting-matrices" id="markdown-toc-plotting-matrices">Plotting Matrices</a>    <ul>
      <li><a href="#using-styles" id="markdown-toc-using-styles">Using styles</a></li>
      <li><a href="#pre-built-matrice-styles" id="markdown-toc-pre-built-matrice-styles">Pre-built matrice styles</a></li>
    </ul>
  </li>
  <li><a href="#plotting-data" id="markdown-toc-plotting-data">Plotting data</a>    <ul>
      <li><a href="#pre-built-data-styles" id="markdown-toc-pre-built-data-styles">Pre-built data styles</a></li>
    </ul>
  </li>
  <li><a href="#create-a-new-plot-style" id="markdown-toc-create-a-new-plot-style">Create a new plot style</a></li>
  <li><a href="#exporting-to-tikz" id="markdown-toc-exporting-to-tikz">Exporting to Tikz</a></li>
</ul>

<h2 id="plotting-matrices">Plotting Matrices</h2>
<p>It is possible to plot matrices using the fault analyzer. This only works if the
result is a matrix (created via the carto module of the analyzer for instance).</p>

<p>To do so, the only thing to do is to use the <code class="language-plaintext highlighter-rouge">plot</code> command with the index of
the manip, the index of the result in this manip to plot and the style.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plot <span class="nv">$MANIP_INDEX</span> <span class="nv">$RESULT_INDEX</span> <span class="nv">$STYLE</span>
</code></pre></div></div>

<p>For instance:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plot 1 5 matrix
</code></pre></div></div>

<p>It is also possible to plot a matrix as a scatter:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plot 1 5 matrixscatter
</code></pre></div></div>

<p class="info">Using matrix scatter, only the position with at least one fault will be plotted.</p>

<p>It is also possible to plot multiple matrices on the same scatter plot by giving
the indexes of all the matrices to plot:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Tested with experiment bcm2711b0_orrR5_iv5_laser_20x_4v_20ns_carto_core_20200211</span>

plot 4 14,15 multimatrixscatterbin
</code></pre></div></div>

<p class="info">Plotting several matrices on the same scatter plot removes the information of
the number of faults per position as the different matrices will be plotted with
different colors.</p>

<h3 id="using-styles">Using styles</h3>
<p>For using a specific style, you can simply name it instead of the classic style.
For instance:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plot 1 5 bcm2711b0_layout
</code></pre></div></div>

<h3 id="pre-built-matrice-styles">Pre-built matrice styles</h3>
<p>Various styles are already implemented for plotting matrices, they are mainly
designed for matching with surface components.</p>

<p>They are defined in the <code class="language-plaintext highlighter-rouge">plot/plot_styles.py</code> file. A style is a dictionary
containing the rules for plotting the result, they are based on the
<a href="http://plotter-doc.xyz/">Plotter</a> Python package.</p>

<p>The styles suitable for plotting a matrice must have the <code class="language-plaintext highlighter-rouge">type</code> entry set to
either <code class="language-plaintext highlighter-rouge">PlotterType.MATRIX</code>, <code class="language-plaintext highlighter-rouge">PlotterType.MATRIXSCATTER</code>,
<code class="language-plaintext highlighter-rouge">PlotterType.MULTISCATTER</code> <code class="language-plaintext highlighter-rouge">PlotterType.MULTIMATRIXSCATTERBIN</code>.</p>

<p>The currently available custom styles for plotting matrices are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">bcm2711b0_layout</code>: a style that plots a matrix over the layout of the
bcm2711b0.</li>
  <li><code class="language-plaintext highlighter-rouge">bcm2711b0_layout_bw</code>: a style that plots a matrix over the black and white
layout of the bcm2711b0.</li>
  <li><code class="language-plaintext highlighter-rouge">bcm2711b0_layout_multimatrixbin</code>: a style that plots several matrices over
the black and white layout of the bcm2711b0.</li>
  <li><code class="language-plaintext highlighter-rouge">intel_core_i3</code>: style that plots a matrix over an opened Intel Core i3-6100T.</li>
  <li><code class="language-plaintext highlighter-rouge">bcm2837</code>: a style that plots a matrix over a bcm2837 component.</li>
  <li><code class="language-plaintext highlighter-rouge">bcm2837_multimatrixbin</code>: style that plots several matrices over a bcm2837
component.</li>
</ul>

<p class="info">All the styles that are used to plot over an image are scatter plots.</p>

<h2 id="plotting-data">Plotting data</h2>
<p>It is possible to plot data. To do so, one must use the <code class="language-plaintext highlighter-rouge">plot</code> command with the
index of the manip, the index of the result of this manip to plot, the style to
use but also the columns to use as data and the column to use as labels.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plot <span class="nv">$MANIP_INDEX</span> <span class="nv">$RESULT_INDEX</span> <span class="nv">$STYLE</span> <span class="nv">$DATA_COLUMN</span> <span class="nv">$LABEL_COLUMN</span>
</code></pre></div></div>

<p class="info">The columns to use must all be in the same result. If you want to plot data from
different manip, use the <a href="/cmds/#merge"><code class="language-plaintext highlighter-rouge">merge</code> command</a>
before plotting.</p>

<p>For instance:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Tested with experiment bcm2711b0_orrR5_iv5_laser_20x_4v_20ns_carto_core_20200211</span>

plot 4 1 bar 3 0
</code></pre></div></div>

<p>It is possible to plot various set of data in the same plot using “multi”
styles. For instance:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plot 4 1 multibar 3,1 0
</code></pre></div></div>

<h3 id="pre-built-data-styles">Pre-built data styles</h3>
<p>Various styles are already implemented for plotting data.</p>

<p>They are defined in the <code class="language-plaintext highlighter-rouge">plot/plot_styles.py</code> file. A style is a dictionary
containing the rules for plotting the result, they are based on the
<a href="http://plotter-doc.xyz/">Plotter</a> Python package.</p>

<p>The currently available custom styles for plotting data are:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">large_dist</code>: a style made for plotting large amount of data by adjusting the
labels size and by rotating them. This style plots the data the same way as
<code class="language-plaintext highlighter-rouge">bar</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">pie</code>: plots the data as a pie.</li>
  <li><code class="language-plaintext highlighter-rouge">bar</code>: plots a single set of data as bars.</li>
  <li><code class="language-plaintext highlighter-rouge">multibar</code>: plots several sets of data as bars.</li>
  <li><code class="language-plaintext highlighter-rouge">marked_plot</code>: plots a set of data as dots with links.</li>
  <li><code class="language-plaintext highlighter-rouge">marked_multiplot</code>: plots several sets of data as dots with links.</li>
</ul>

<h2 id="create-a-new-plot-style">Create a new plot style</h2>
<p>To create a new plot style, it is only necessary to create a plot dictionary
style suitable with the <a href="http://plotter-doc.xyz/">Plotter</a> Python package and to
add it to the <code class="language-plaintext highlighter-rouge">styles</code> dictionnary in the <code class="language-plaintext highlighter-rouge">plot/plot_styles.py</code> file.</p>

<h2 id="exporting-to-tikz">Exporting to Tikz</h2>
<p>It is possible to export a plotted figure using the command <code class="language-plaintext highlighter-rouge">tikz</code> instead of
the plot command. It is also possible to add a name to the tikz file. For
instance:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Tested with experiment bcm2711b0_orrR5_iv5_laser_20x_4v_20ns_carto_core_20200211</span>

tikz 4 1 bar 3 0 my_tikz.tex
</code></pre></div></div>

<p>This command will save the figure generated by the <code class="language-plaintext highlighter-rouge">plot 4 1 bar 3 0</code> command
into the <code class="language-plaintext highlighter-rouge">my_tikz.tex</code> file. This file will be located at in the
<code class="language-plaintext highlighter-rouge">{MAIN_DIR}/tikz/</code> directory.</p>

<p class="info">It is possible to customize the target directory by modifying the <code class="language-plaintext highlighter-rouge">tikz_dir</code>
option in the <code class="language-plaintext highlighter-rouge">config.py</code> file.</p>

<p class="info">The tikz exportations does not work correctly for matrices. It is recommanded to
export them as a <code class="language-plaintext highlighter-rouge">.pdf</code> file directly from the <code class="language-plaintext highlighter-rouge">Matplotlib</code> interface.</p>
:ET
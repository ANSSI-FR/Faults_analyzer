<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Fault models - Fault Analyzer doc.</title> <link rel="shortcut icon" href="/Fault_analyzer/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/Fault_analyzer/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/Fault_analyzer/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/Fault_analyzer/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Fault models | Fault Analyzer doc.</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Fault models" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="The documentation of the ANSSI’s fault analyzer." /> <meta property="og:description" content="The documentation of the ANSSI’s fault analyzer." /> <link rel="canonical" href="/Fault_analyzer/dev/fault_models/" /> <meta property="og:url" content="/Fault_analyzer/dev/fault_models/" /> <meta property="og:site_name" content="Fault Analyzer doc." /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Fault models" /> <script type="application/ld+json"> {"headline":"Fault models","dateModified":"2021-04-06T15:53:17+02:00","url":"/Fault_analyzer/dev/fault_models/","@type":"WebPage","description":"The documentation of the ANSSI’s fault analyzer.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/Fault_analyzer/" class="site-title lh-tight"> Fault Analyzer doc. </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Fault_analyzer/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/Fault_analyzer/cmds/" class="nav-list-link">Commands</a></li><li class="nav-list-item"><a href="/Fault_analyzer/depth/" class="nav-list-link">In depth analysis</a></li><li class="nav-list-item"><a href="/Fault_analyzer/plot/" class="nav-list-link">Plotting results</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/Fault_analyzer/dev/" class="nav-list-link">Development</a><ul class="nav-list "><li class="nav-list-item "><a href="/Fault_analyzer/dev/analyzer_modules/" class="nav-list-link">Analyzer modules</a></li><li class="nav-list-item "><a href="/Fault_analyzer/dev/doc/" class="nav-list-link">Documentation</a></li><li class="nav-list-item active"><a href="/Fault_analyzer/dev/fault_models/" class="nav-list-link active">Fault models</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Fault Analyzer doc." aria-label="Search Fault Analyzer doc." autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/pmarsceill/just-the-docs" class="site-button" > Just the Docs on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Fault_analyzer/dev/">Development</a></li> <li class="breadcrumb-nav-list-item"><span>Fault models</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="adding-a-new-fault-model"> <a href="#adding-a-new-fault-model" aria-labelledby="adding-a-new-fault-model" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding a new fault model </h1> <ul id="markdown-toc"> <li><a href="#file-location" id="markdown-toc-file-location">File location</a></li> <li><a href="#inheritance" id="markdown-toc-inheritance">Inheritance</a></li> <li><a href="#the-instructionfaultmodel-has-a-special-attribute" id="markdown-toc-the-instructionfaultmodel-has-a-special-attribute">The <code class="language-plaintext highlighter-rouge">InstructionFaultModel</code> has a special attribute:</a></li> <li><a href="#create-a-new-fault-model" id="markdown-toc-create-a-new-fault-model">Create a new fault model</a> <ul> <li><a href="#develop-a-test-function" id="markdown-toc-develop-a-test-function">Develop a test function</a> <ul> <li><a href="#arguments" id="markdown-toc-arguments">Arguments</a></li> <li><a href="#returned-value" id="markdown-toc-returned-value">Returned value</a></li> <li><a href="#examples" id="markdown-toc-examples">Examples</a></li> </ul> </li> </ul> </li> </ul> <h2 id="file-location"> <a href="#file-location" aria-labelledby="file-location" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> File location </h2> <p>The fault models are defined in the <code class="language-plaintext highlighter-rouge">modules/new_analyzer/fault_models.py</code> file.</p> <h2 id="inheritance"> <a href="#inheritance" aria-labelledby="inheritance" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inheritance </h2> <p>Currently, there are two fault models classes <code class="language-plaintext highlighter-rouge">InstructionFaultModel</code> and <code class="language-plaintext highlighter-rouge">DataFaultModel</code> which both inherit from the <code class="language-plaintext highlighter-rouge">FaultModel</code> class.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FaultModel</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">faulted_obs</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">faulted_obs</span> <span class="o">=</span> <span class="n">faulted_obs</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InstructionFaultModel</span><span class="p">(</span><span class="n">FaultModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">faulted_obs</span><span class="p">,</span> <span class="n">origin</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">faulted_obs</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">origin</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">DataFaultModel</span><span class="p">(</span><span class="n">FaultModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">faulted_obs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">faulted_obs</span><span class="p">)</span>
</code></pre></div></div> <p>Every fault model has two attributes:</p> <ul> <li><code class="language-plaintext highlighter-rouge">name</code>: the name of the fault model.</li> <li><code class="language-plaintext highlighter-rouge">faulted_obs</code>: the index of the faulted observed.</li> </ul> <h2 id="the-instructionfaultmodel-has-a-special-attribute"> <a href="#the-instructionfaultmodel-has-a-special-attribute" aria-labelledby="the-instructionfaultmodel-has-a-special-attribute" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The <code class="language-plaintext highlighter-rouge">InstructionFaultModel</code> has a special attribute: </h2> <h2 id="create-a-new-fault-model"> <a href="#create-a-new-fault-model" aria-labelledby="create-a-new-fault-model" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a new fault model </h2> <p>To create a new fault model you must define two things:</p> <ul> <li>the name of the fault model.</li> <li>the test function of this fault model.</li> </ul> <p>Both must be set either in the <code class="language-plaintext highlighter-rouge">data_fault_models</code> or in the <code class="language-plaintext highlighter-rouge">instruction_fault_models</code> variables in the <code class="language-plaintext highlighter-rouge">modules/new_analyzer/fault_models.py</code> file.</p> <p>For instance:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_fault_models</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"Bit reset"</span><span class="p">,</span>
        <span class="s">"test"</span><span class="p">:</span> <span class="n">is_bit_reset</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"Bit set"</span><span class="p">,</span>
        <span class="s">"test"</span><span class="p">:</span> <span class="n">is_bit_set</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">instr_fault_models</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"Other observed value"</span><span class="p">,</span>
        <span class="s">"test"</span><span class="p">:</span> <span class="n">is_other_obs_fault_model</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"Other observed complementary value"</span><span class="p">,</span>
        <span class="s">"test"</span><span class="p">:</span> <span class="n">is_other_obs_comp_fault_model</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></div> <h3 id="develop-a-test-function"> <a href="#develop-a-test-function" aria-labelledby="develop-a-test-function" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Develop a test function </h3> <p>The test function must have the following prototype:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_test_function</span><span class="p">(</span><span class="n">fault</span><span class="p">,</span> <span class="n">default_values</span><span class="p">,</span> <span class="n">nb_bits</span><span class="p">):</span>
    <span class="c1"># the core of the function
</span>    <span class="k">return</span> <span class="n">val</span>
</code></pre></div></div> <ul> <li>the <code class="language-plaintext highlighter-rouge">fault</code> parameter is a <code class="language-plaintext highlighter-rouge">Fault</code> class defined in <code class="language-plaintext highlighter-rouge">modules/new_analyzer/fault.py</code> and has the following definition: <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Fault</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">faulted_obs</span><span class="p">,</span> <span class="n">faulted_value</span><span class="p">):</span>
      <span class="bp">self</span><span class="p">.</span><span class="n">faulted_obs</span> <span class="o">=</span> <span class="n">faulted_obs</span>
      <span class="bp">self</span><span class="p">.</span><span class="n">faulted_value</span> <span class="o">=</span> <span class="n">faulted_value</span>
</code></pre></div> </div> <p>It stores the index of the faulted observed in <code class="language-plaintext highlighter-rouge">faulted_obs</code> and the faulted value in <code class="language-plaintext highlighter-rouge">faulted_value</code>.</p> </li> </ul> <h4 id="arguments"> <a href="#arguments" aria-labelledby="arguments" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Arguments </h4> <ul> <li>the <code class="language-plaintext highlighter-rouge">default_values</code> parameter is the list of the observed default values defined in the parameter file of the experiments.</li> <li>the <code class="language-plaintext highlighter-rouge">nb_bits</code> parameter is the number of bits to consider the values on as defined in the parameter file of the experiments.</li> </ul> <h4 id="returned-value"> <a href="#returned-value" aria-labelledby="returned-value" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Returned value </h4> <p>The test function either return a boolean in the case of a <code class="language-plaintext highlighter-rouge">DataFaultModel</code> flagging if the faulted value matches the tested fault model, or it returns the origin(s) of the faulted value when it could be determined. In the case there are multiple origins, the returned value can be a tuple.</p> <h4 id="examples"> <a href="#examples" aria-labelledby="examples" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examples </h4> <p>You can see examples in the <code class="language-plaintext highlighter-rouge">modules/new_analyzer/fault_models.py</code> file.</p> <hr> <footer> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
